(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{200:function(e,t,r){},201:function(e,t,r){},326:function(e,t,r){},327:function(e,t,r){"use strict";r.r(t),r.d(t,"store",(function(){return lt}));var n=r(1),c=r.n(n),s=r(37),o=r.n(s),a=(r(200),r(201),r(17)),i=r(154),l=r(7),j=r(149),d=r(87),u=r(151),b=r(90),O=r(13),p=r(6),h=r(63),f=r(150),x=r(22),m=r.p+"static/media/login.8cc1ab77.svg",g=r(24),v=r(32),y=r(10),w=r(15),S=r(31),_=r(46),R=r.n(_),E="AUTH_START",C="AUTH_SUCCESS",A="AUTH_FAILURE",T="AUTH_RESET",k="AUTH_LOGOUT",F=function(e,t){return function(){var r=Object(S.a)(Object(w.a)().mark((function r(n){var c,s;return Object(w.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:E}),r.prev=1,r.next=4,R.a.post("api/auth/".concat(e),t);case 4:c=r.sent,n({type:C,payload:c.data.food_order_access_token}),localStorage.setItem("food_order_access_token",c.data.food_order_access_token),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),s=r.t0.response&&r.t0.response.data.error_msg?r.t0.response.data.error_msg:r.t0.message,n({type:A,payload:s});case 13:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()},I=r(30),N=r(60),D=r(62),z=r(2),P=function(e){var t=e.status,r=e.title,c=e.description,s=Object(n.useState)(!0),o=Object(I.a)(s,2),a=o[0],i=o[1];return Object(z.jsx)(z.Fragment,{children:a?Object(z.jsxs)(N.a,{status:t,children:[Object(z.jsx)(N.c,{}),Object(z.jsx)(N.d,{mr:2,children:r}),Object(z.jsx)(N.b,{children:c}),Object(z.jsx)(D.a,{onClick:function(){return i(!1)},position:"absolute",right:"8px",top:"8px"})]}):null})},L=r(163),U=function(){var e=localStorage.getItem("food_order_access_token");if(!e)return!1;try{return!(Object(L.a)(e).exp<(new Date).getTime()/1e3)}catch(t){return!1}};R.a.interceptors.request.use((function(e){var t=localStorage.getItem("food_order_access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var B=R.a,W="GET_USER",q="USER_FAILURE",H="USER_START",G=function(){return function(){var e=Object(S.a)(Object(w.a)().mark((function e(t){var r,n;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:H}),e.prev=1,e.next=4,B.get("/api/users/");case 4:r=e.sent,t({type:W,payload:r.data.user}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0.response&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:e.t0.message,t({type:q,payload:n});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},X=function(e){var t=e.history,r=Object(y.b)(),c=Object(y.c)((function(e){return e.auth}));return console.log(c.loading),Object(n.useEffect)((function(){U()&&t.push("/")}),[t]),Object(n.useEffect)((function(){c.token&&(r(G()),t.push("/"))}),[c.token,t,r]),Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(j.d,{children:[Object(z.jsx)(j.b,{flex:["0","0.6","0.6"],children:Object(z.jsx)(d.a,{boxSize:"500px",src:m,alt:"Login"})}),Object(z.jsxs)(j.a,{flex:["1","0.4","0.4"],alignSelf:"center",children:[Object(z.jsx)(j.e,{as:"h3",size:"lg",marginBottom:"10px",children:"Welcome Back!"}),Object(z.jsx)(j.j,{marginBottom:"16px",children:"Fill in your login credentials to pick up where you left off"}),c.error?Object(z.jsx)(P,{status:"error",title:c.errResponse}):null,Object(z.jsx)(g.c,{initialValues:{email:"",password:""},onSubmit:function(e,t){t.setSubmitting(c.loading),r(F("login",e))},validationSchema:v.a({email:v.c().email("Invalid email address").required("Enter your email address"),password:v.c().min(6).required("Enter your password")}),children:function(e){return Object(z.jsxs)(g.b,{children:[Object(z.jsxs)(j.i,{spacing:4,children:[Object(z.jsx)(g.a,{name:"email",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.email&&r.touched.email,children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(x.c,{color:"gray.700"}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({},t),{},{id:"email",placeholder:"Email",size:"lg",width:{base:"auto",md:"auto",xl:"400px"}}))]}),Object(z.jsx)(h.b,{children:r.errors.email})]})}}),Object(z.jsx)(g.a,{name:"password",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.password&&r.touched.password,children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(x.e,{color:"gray.700"}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({type:"password"},t),{},{id:"password",placeholder:"Password",size:"lg",width:{base:"auto",md:"auto",xl:"400px"}}))]}),Object(z.jsx)(h.b,{children:r.errors.password})]})}})]}),Object(z.jsx)(u.a,{mt:4,colorScheme:"blue",isLoading:c.loading,type:"submit",children:"Login"}),Object(z.jsxs)(j.j,{marginTop:"20px",children:["Don't have an account?"," ",Object(z.jsx)(j.f,{color:"blue.500",href:"/register",children:"Sign Up"})]})]})}})]})]})})},J=r.p+"static/media/register.fed4c349.svg",K=r(77),Y=function(e){var t=e.history,r=Object(y.b)(),c=Object(y.c)((function(e){return e.auth}));return Object(n.useEffect)((function(){U()&&t.push("/")}),[t]),Object(n.useEffect)((function(){c.token&&(r(G()),t.push("/"))}),[c.token,t,r]),Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(j.d,{children:[Object(z.jsx)(j.b,{flex:["0","0.6","0.6"],children:Object(z.jsx)(d.a,{boxSize:"500px",src:J,alt:"Welcome to Taste!"})}),Object(z.jsxs)(j.a,{flex:["1","0.4","0.4"],alignSelf:"center",children:[Object(z.jsx)(j.e,{as:"h3",size:"lg",marginBottom:"10px",children:"New to Taste!?"}),Object(z.jsx)(j.j,{marginBottom:"16px",children:"Fill in your details to experience food delivery in a different way"}),c.error?Object(z.jsx)(P,{status:"error",title:c.errResponse}):null,Object(z.jsx)(g.c,{initialValues:{email:"",password:"",firstName:"",lastName:"",confirmPassword:"",username:"",address:""},onSubmit:function(e,t){delete e.confirmPassword,r(F("register",e)),t.setSubmitting(c.loading)},validationSchema:v.a({email:v.c().email("Invalid email address").required("Enter your email address"),firstName:v.c().min(3).max(50).required("Enter your First Name"),lastName:v.c().min(3).max(50).required("Enter your Last Name"),username:v.c().min(3).max(50).required("Enter your username"),password:v.c().min(6).required("Enter your password"),confirmPassword:v.c().oneOf([v.b("password"),null],"Passwords must match")}),children:function(e){return Object(z.jsxs)(g.b,{children:[Object(z.jsxs)(j.i,{spacing:4,children:[Object(z.jsxs)(j.d,{justifyContent:"space-between",flexDirection:{base:"column",md:"row",lg:"row"},children:[Object(z.jsx)(g.a,{name:"firstName",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.firstName&&r.touched.firstName,style:{marginRight:"10px",marginBottom:"10px"},children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(K.b,{}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({},t),{},{id:"firstName",placeholder:"First Name",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.firstName})]})}}),Object(z.jsx)(g.a,{name:"lastName",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.lastName&&r.touched.lastName,children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(K.b,{}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({},t),{},{id:"lastName",placeholder:"Last Name",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.lastName})]})}})]}),Object(z.jsxs)(j.d,{flexDirection:{base:"column",md:"row",lg:"row"},children:[Object(z.jsx)(g.a,{name:"username",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.username&&r.touched.username,style:{marginRight:"10px",marginBottom:"10px"},children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(K.b,{}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({},t),{},{id:"username",placeholder:"Username",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.username})]})}}),Object(z.jsx)(g.a,{name:"email",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.email&&r.touched.email,children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(x.c,{}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({},t),{},{id:"email",placeholder:"Email",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.email})]})}})]}),Object(z.jsxs)(j.d,{flexDirection:{base:"column",md:"row",lg:"row"},children:[Object(z.jsx)(g.a,{name:"password",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.password&&r.touched.password,style:{marginRight:"10px",marginBottom:"10px"},children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(x.e,{}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({type:"password"},t),{},{id:"password",placeholder:" Password",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.password})]})}}),Object(z.jsx)(g.a,{name:"confirmPassword",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.confirmPassword&&r.touched.confirmPassword,children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(x.e,{}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({type:"password"},t),{},{id:"confirmPassword",placeholder:"Confirm Password",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.confirmPassword})]})}})]}),Object(z.jsx)(g.a,{name:"address",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.address&&r.touched.address,children:[Object(z.jsxs)(f.b,{children:[Object(z.jsx)(f.c,{pointerEvents:"none",children:Object(z.jsx)(K.a,{color:"blue.600"}),marginTop:"5px"}),Object(z.jsx)(f.a,Object(p.a)(Object(p.a)({},t),{},{id:"address",placeholder:"Address",size:"lg",width:{base:"100%",md:"100%"}}))]}),Object(z.jsx)(h.b,{children:r.errors.address})]})}})]}),Object(z.jsx)(u.a,{mt:4,colorScheme:"blue",isLoading:c.loading,type:"submit",children:"Register"}),Object(z.jsxs)(j.j,{marginTop:"20px",children:["Already have an account?"," ",Object(z.jsx)(j.f,{color:"blue.500",href:"/login",children:"Login"})]})]})}})]})]})})},M=r(165),V=["component"],Q=function(e){var t=e.component,r=Object(M.a)(e,V);return Object(z.jsx)(O.b,Object(p.a)(Object(p.a)({},r),{},{render:function(e){return U()?Object(z.jsx)(t,Object(p.a)({},e)):Object(z.jsx)(O.a,{to:"/login"})}}))},Z=(r(326),function(){return Object(z.jsx)("div",{class:"main",children:Object(z.jsxs)("div",{class:"mainbox",children:[Object(z.jsx)("div",{class:"err",children:"4"}),Object(z.jsx)("i",{class:"far fa-question-circle fa-spin"}),Object(z.jsx)("div",{class:"err2",children:"4"}),Object(z.jsxs)("div",{class:"msg",children:["Maybe this page moved? Got deleted? Is hiding out in quarantine? Never existed in the first place? or maybe you are not worthy.",Object(z.jsxs)("p",{children:["Anyhow, You can back ",Object(z.jsx)("a",{className:"font-white",href:"/",children:"home"})," and try from there."]})]})]})})}),$=r(156),ee="ADD_TO_CART",te="REMOVE_FROM_CART",re="RESTORE_CART",ne="UPDATE_CART_COUPON",ce="COUPON_ERROR",se="CLEAR_CART",oe="CLEAR_ERROR_AND_MESSAGE",ae=function(e,t){return function(r){var n={food:e,qty:Number(t)};r({type:ee,payload:n})}},ie=function(e){return function(t){t({type:te,payload:e})}};function le(e){var t=e.food,r=Object(y.b)(),n=Object(y.c)((function(e){return e.cart})),c=Object($.a)(),s=t.image,o=t.name,a=t.price,i=t._id,l=function(){c({title:"Item added",description:"We've added ".concat(o," to the cart"),status:"success",position:"top-right",duration:800,isClosable:!0}),r(ae(t,1))};return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(j.a,{maxW:"sm",borderWidth:"1px",borderRadius:"lg",overflow:"hidden",children:[s&&Object(z.jsx)(d.a,{src:s,alt:o}),Object(z.jsxs)(j.a,{p:"6",children:[Object(z.jsx)(j.a,{mt:"1",fontWeight:"semibold",as:"h4",lineHeight:"tight",children:o}),Object(z.jsxs)(j.a,{d:"flex",mt:"2",alignItems:"center",justifyContent:"space-between",children:[Object(z.jsxs)(j.a,{children:[a," XAF"]}),n&&n.foods.length>0&&n.foods.find((function(e){return e._id===i}))?Object(z.jsx)(u.a,{colorScheme:"red",variant:"outline",leftIcon:Object(z.jsx)(x.b,{}),onClick:function(){return r(ie(i))},children:"Remove from cart"}):Object(z.jsx)(u.a,{colorScheme:"teal",variant:"outline",leftIcon:Object(z.jsx)(x.a,{}),onClick:function(){return l()},children:"Add to cart"})]})]})]})})}var je=function(e){var t=e.foods;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(j.g,{minChildWidth:"250px",spacing:"40px",children:t?t.map((function(e,t){return Object(z.jsx)(le,{food:e},t)})):null})})},de="FOOD_START",ue="FOOD_SUCCESS",be="FOOD_FAILURE",Oe="FOOD_RESET",pe=r(88),he=function(e){var t=e.size;return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(pe.a,{size:t,color:"green.500"})})},fe=function(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.foods})),r=t.loading,c=t.foods,s=t.error;return Object(n.useEffect)((function(){c||e(function(){var e=Object(S.a)(Object(w.a)().mark((function e(t){var r,n;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:de}),e.prev=1,e.next=4,R.a.get("api/foods");case 4:r=e.sent,t({type:ue,payload:r.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0.response&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:e.t0.message,t({type:be,payload:n});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e,c]),r?Object(z.jsx)(j.b,{children:Object(z.jsx)(he,{size:"xl"})}):s?Object(z.jsx)(j.b,{children:Object(z.jsx)(j.j,{fontWeight:"bold",children:"Sorry, an error occurred!"})}):Object(z.jsxs)("div",{children:[Object(z.jsx)(j.e,{as:"h3",size:"lg",mb:"20px",children:"A Tastyful World"}),c&&Object(z.jsx)(je,{foods:c})]})},xe="PAY_FOR_ORDER",me="ORDER_FAILED",ge="ORDER_RESPONSE_CLEAR",ve="GET_ORDERS",ye="GET_SINGLE_ORDER",we="ORDER_START",Se=r(152),_e=function(e){return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})},Re=function(){var e=Object(y.c)((function(e){return e.order})),t=e.orders,r=e.loading,c=e.error,s=Object(y.c)((function(e){return e.user})).user,o=Object(y.b)();return Object(n.useEffect)((function(){t||o(function(){var e=Object(S.a)(Object(w.a)().mark((function e(t){var r,n;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:we}),e.prev=1,e.next=4,B.get("api/orders");case 4:r=e.sent,t({type:ve,payload:r.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n=e.t0.response&&e.t0.response.data.error_msg?e.t0.response.data.error_msg:e.t0.message,t({type:me,payload:n});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[o,t]),r?Object(z.jsx)(j.b,{children:Object(z.jsx)(he,{size:"xl"})}):(c&&j.b,Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(j.j,{textAlign:"right",fontWeight:"semibold",mb:"20px",children:["Hello \u270c",s&&s.lastName]}),Object(z.jsx)(j.j,{fontWeight:"semibold",children:"Orders"}),Object(z.jsxs)(Se.a,{size:"sm",children:[Object(z.jsx)(Se.f,{children:Object(z.jsxs)(Se.g,{children:[Object(z.jsx)(Se.e,{children:"Reference"}),Object(z.jsx)(Se.e,{children:"Created At"}),Object(z.jsx)(Se.e,{children:"Total Amount"})]})}),Object(z.jsx)(Se.b,{children:t?t.map((function(e,t){return Object(z.jsxs)(Se.g,{children:[Object(z.jsx)(Se.c,{children:Object(z.jsx)("p",{href:"/order/".concat(e._id),children:e.reference})}),Object(z.jsx)(Se.c,{children:_e(e.createdAt)}),Object(z.jsxs)(Se.c,{children:[e.cart.totalAmount," XAF"]})]},t)})):Object(z.jsx)("p",{children:"No order yet"})})]})]}))},Ee=function(e){var t=e.match,r=Object(y.b)(),c=Object($.a)(),s=Object(y.c)((function(e){return e.order})),o=s.errResponse,a=s.error,i=s.singleOrder;Object(n.useEffect)((function(){var e;r((e=t.params.id,function(){var t=Object(S.a)(Object(w.a)().mark((function t(r){var n,c,s,o,a;return Object(w.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r({type:we}),t.prev=1,n=lt.getState(),(c=n.order).orders){t.next=10;break}return t.next=6,B.get("/api/orders/".concat(e));case 6:s=t.sent,r({type:ye,payload:s.data}),t.next=12;break;case 10:o=c.orders.filter((function(t){return t._id===e})),r({type:ye,payload:o});case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),a=t.t0.response&&t.t0.response.data.error_msg?t.t0.response.data.error_msg:t.t0.message,r({type:me,payload:a});case 18:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()))}),[r,t.params.id]),Object(n.useEffect)((function(){(a||o)&&c({title:"Error!",description:o||"Something went wrong",status:"error",position:"top-right",duration:5e3,isClosable:!0})}),[a,o,c]);var l=function(e){var t;e.preventDefault(),r((t=i.cart,function(e){localStorage.setItem("foodoCart",JSON.stringify(t)),e({type:re,payload:t})})),c({title:"Success!",description:"Check the cart, It has been populated with this order",status:"success",position:"top-right",duration:5e3,isClosable:!0})};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(j.j,{as:"h1",fontWeight:"bold",mb:"10px",children:"Order Details"}),i?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(j.j,{children:["Order ID #",i._id]}),Object(z.jsxs)(Se.a,{size:"sm",children:[Object(z.jsx)(Se.f,{children:Object(z.jsxs)(Se.g,{children:[Object(z.jsx)(Se.e,{children:"Name"}),Object(z.jsx)(Se.e,{children:"Qty"}),Object(z.jsx)(Se.e,{children:"Amount"})]})}),Object(z.jsx)(Se.b,{children:i.cart.foods.map((function(e,t){return Object(z.jsxs)(Se.g,{children:[Object(z.jsx)(Se.c,{children:e.name}),Object(z.jsx)(Se.c,{children:e.qty}),Object(z.jsxs)(Se.c,{children:[e.price," XAF"]})]},t)}))}),Object(z.jsx)(Se.d,{children:Object(z.jsxs)(Se.g,{children:[Object(z.jsx)(Se.e,{}),Object(z.jsx)(Se.e,{}),Object(z.jsxs)(Se.e,{children:["Total Amount: ",i.cart.totalAmount," XAF"]})]})})]}),Object(z.jsx)(u.a,{variant:"outline",colorScheme:"blue",onClick:function(e){return l(e)},children:"Re Order"})]}):null]})},Ce=function(){return Object(z.jsxs)(O.d,{children:[Object(z.jsx)(O.b,{exact:!0,path:"/login",component:X}),Object(z.jsx)(O.b,{exact:!0,path:"/register",component:Y}),Object(z.jsx)(O.b,{exact:!0,path:"/",component:fe}),Object(z.jsx)(Q,{exact:!0,path:"/profile/",component:Re}),Object(z.jsx)(Q,{exact:!0,path:"/order/:id",component:Ee}),Object(z.jsx)(O.b,{component:Z})]})},Ae=r(155),Te=r(153),ke=function(e){var t=e.food,r=t.image,n=t.name,c=t.qty,s=t.price,o=t._id,a=Array.from({length:10},(function(e,t){return t+1})),i=Object(y.b)();return Object(z.jsx)("div",{children:Object(z.jsxs)(j.d,{justifyContent:"space-between",mb:"2",children:[Object(z.jsx)(d.a,{src:r,alt:n,boxSize:"70px",style:{objectFit:"contain"}}),Object(z.jsx)(j.a,{as:"p",width:"100px",fontSize:"0.9rem",children:n}),Object(z.jsxs)(j.j,{fontWeight:"semibold",as:"p",children:[s," XAF"]}),Object(z.jsx)(Te.a,{width:"20%",value:c,onChange:function(e){return function(e){i(ae(t,e.target.value))}(e)},children:a.map((function(e,t){return Object(z.jsx)("option",{value:e,children:e},t)}))}),Object(z.jsx)(j.a,{children:Object(z.jsx)(u.b,{variant:"outline",colorScheme:"red","aria-label":"Delete item from cart",icon:Object(z.jsx)(x.b,{}),onClick:function(){return i(ie(o))}})})]})})},Fe=r(167),Ie=function(e){var t=e.reference,r=e.orderId,c=Object(y.b)(),s=Object(n.useState)(!0),o=Object(I.a)(s,2),a=o[0],i=o[1],l=function(){c({type:"ORDER_RESPONSE_CLEAR"}),i(!1)};return Object(z.jsx)(z.Fragment,{children:a?Object(z.jsxs)(Ae.g,{isOpen:a,onClose:l,children:[Object(z.jsx)(Ae.m,{}),Object(z.jsxs)(Ae.j,{children:[Object(z.jsx)(Ae.l,{children:"Order success"}),Object(z.jsx)(Ae.i,{}),Object(z.jsxs)(Ae.h,{children:["Yay! Your order with id ",r," and payment reference"," ",t," is successful."]}),Object(z.jsxs)(Ae.k,{children:[Object(z.jsx)(u.a,{colorScheme:"blue",mr:3,onClick:l,children:"Close"}),Object(z.jsx)(u.a,{variant:"ghost",children:Object(z.jsx)(j.f,{href:"/profile",children:"Check Orders"})})]})]})]}):null})},Ne=function(){var e=Object(n.useState)(),t=Object(I.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(!1),o=Object(I.a)(s,2),a=o[0],i=o[1],l=Object(y.b)(),d=function(){r?l(function(e){return function(){var t=Object(S.a)(Object(w.a)().mark((function t(r){var n;return Object(w.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.get("/api/coupons/code/".concat(e));case 3:n=t.sent,r({type:ne,payload:{percent_off:n.data.percent_off,coupon:e}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r({type:ce,payload:"Coupon is invalid"});case 10:setTimeout((function(){r({type:oe})}),1e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(r)):i(!0)};return Object(z.jsxs)(j.a,{align:"right",textAlign:"right",children:[Object(z.jsx)(j.j,{children:"Got a coupon ? Use it below:"}),Object(z.jsx)(f.a,{value:r,name:"coupon",onChange:function(e){c(e.target.value),i(null)},placeholder:"Enter Coupon code",size:"sm",width:"auto",mr:"1",isInvalid:a,errorBorderColor:"red.300"}),Object(z.jsx)(u.a,{onClick:function(){return d()},colorScheme:"blue",size:"sm",variant:"outline",children:"Apply"})]})},De=function(e){var t=e.initializePayment,r=e.disabled,n=e.onSuccess;return Object(z.jsx)(u.a,{type:"submit",form:"my-form",color:"white  ",colorScheme:"blue",disabled:r,onClick:function(){t(n)},children:"Checkout"})},ze=function(e){var t=e.isOpen,r=e.onClose,c=Object(y.b)(),s=Object($.a)(),o=Object(y.c)((function(e){return e.cart})),a=Object(y.c)((function(e){return e.user}))||{},i=Object(y.c)((function(e){return e.order})).orderResponse,l=Object(y.c)((function(e){return e.cart})),d=l.message,b=l.error,O=a.user?a.user.email:null;Object(n.useEffect)((function(){!a.user&&U()&&c(G())}),[c,a.user]),Object(n.useEffect)((function(){d&&s({title:"Success",description:d,status:"success",position:"top-right",duration:5e3,isClosable:!0}),b&&s({title:"Failed",description:b,status:"warning",position:"top-right",duration:5e3,isClosable:!0})}),[s,d,b]);var p={email:a.user?O:null,amount:o?100*o.totalAmount:0,publicKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PAYSTACK_PUBLIC_KEY},h=function(e){c(function(e,t){return function(){var r=Object(S.a)(Object(w.a)().mark((function r(n){var c,s;return Object(w.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:we}),r.prev=1,r.next=4,B.post("api/orders",{cart:e,reference:t});case 4:c=r.sent,n({type:xe,payload:c.data}),n({type:"CLEAR_CART"}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),s=r.t0.response&&r.t0.response.data.error_msg?r.t0.response.data.error_msg:r.t0.message,n({type:me,payload:s});case 13:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}(o,e.reference)),s({title:"Success",description:"Order is processing, Kindly wait for a popup that will confirm your order. Do not refresh this page",status:"success",position:"top-right",duration:5e3,isClosable:!0})},f=Object(Fe.a)(p);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(Ae.a,{isOpen:t,onClose:r,size:"sm",children:[Object(z.jsx)(Ae.f,{}),Object(z.jsxs)(Ae.d,{children:[Object(z.jsx)(Ae.c,{}),Object(z.jsx)(Ae.e,{children:"Cart"}),Object(z.jsx)(Ae.b,{children:o&&o.foods.length>0?Object(z.jsxs)(z.Fragment,{children:[o.foods.map((function(e,t){return Object(z.jsx)(ke,{food:e},t)})),Object(z.jsx)(Ne,{}),o.priceBeforeCoupon&&Object(z.jsxs)(j.a,{textAlign:"right",fontWeight:"bold",children:["Original Price: ",o.priceBeforeCoupon," XAF",Object(z.jsx)("br",{}),"Discount: ",o.discount," %"]}),Object(z.jsxs)(j.a,{textAlign:"right",fontWeight:"bold",children:["Total: ",o.totalAmount," XAF"]}),Object(z.jsx)(j.a,{textAlign:"right",mt:"3",children:O?Object(z.jsx)(De,{initializePayment:f,disabled:!1,onSuccess:h}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(De,{initializePayment:f,disabled:!0,onSuccess:h}),Object(z.jsxs)(j.a,{mt:"10px",children:[Object(z.jsx)(u.a,{colorScheme:"teal",mr:"4",children:Object(z.jsx)(j.f,{href:"/register",children:"Sign Up"})}),Object(z.jsx)(u.a,{colorScheme:"teal",children:Object(z.jsx)(j.f,{href:"/login",children:"Log in"})})]})]})})]}):Object(z.jsx)(j.a,{as:"h3",fontWeight:"bold",fontSize:"xl",children:"Nothing in cart"})})]})]}),i?Object(z.jsx)(Ie,{reference:i.reference,orderId:i._id}):null]})},Pe=r(110),Le=r(168),Ue=r(169),Be=r.p+"static/media/logo.a0fda91f.svg",We=function(){return Object(z.jsx)(j.b,{children:Object(z.jsxs)(j.a,{bg:"teal.700",w:"100%",p:4,color:"white",textAlign:"center",children:["Built with \u2764 by"," ",Object(z.jsxs)(j.f,{href:"https://fredolywagni.com",isExternal:!0,fontWeight:"bold",color:"#ababff",mr:"10px",children:["Fredoly Wagni ",Object(z.jsx)(x.d,{mx:"2px"})]})]})})},qe=function(){var e=Object(a.c)(),t=e.isOpen,r=e.onOpen,n=e.onClose,c=Object(y.c)((function(e){return e.cart}));return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(i.a,{onClick:function(){return r()},icon:Object(z.jsx)(l.a,{as:Pe.a}),bg:"white",m:"3",style:{cursor:"pointer",zIndex:1},children:Object(z.jsx)(i.b,{boxSize:"1.5rem",bg:"green.500",fontSize:"0.8rem",color:"white",children:c.count>0?c.count:0})}),Object(z.jsx)(ze,{isOpen:t,onClose:n})]})};var He=function(){var e=Object(y.c)((function(e){return e.user})).user,t=Object(y.b)();return Object(n.useEffect)((function(){localStorage.getItem("foodoCart")&&(JSON.parse(localStorage.getItem("foodoCart")).count>0&&t((function(e){e({type:re,payload:JSON.parse(localStorage.getItem("foodoCart"))})})))}),[t]),Object(z.jsxs)(b.a,{children:[Object(z.jsxs)(j.d,{children:[Object(z.jsx)(j.a,{p:"4",children:Object(z.jsx)(j.e,{size:"md",children:Object(z.jsx)(j.f,{href:"/",children:Object(z.jsx)(d.a,{boxSize:"90px",borderRadius:"full",objectFit:"cover",src:Be,alt:"Tasty Logo"})})})}),Object(z.jsx)(j.h,{}),Object(z.jsx)(j.a,{p:"4",style:{display:"flex",alignItems:"center",cursor:"pointer"},children:U()||e?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(j.f,{href:"/profile",children:Object(z.jsx)(l.a,{as:Le.a,w:6,h:6})}),Object(z.jsx)(qe,{}),Object(z.jsx)(u.b,{"aria-label":"Log out",icon:Object(z.jsx)(Ue.a,{w:6,h:6}),onClick:function(){return t(function(){var e=Object(S.a)(Object(w.a)().mark((function e(t){return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:k}),localStorage.removeItem("food_order_access_token");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})]}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(u.a,{colorScheme:"teal",mr:"4",children:Object(z.jsx)(j.f,{href:"/register",children:"Sign Up"})}),Object(z.jsx)(u.a,{colorScheme:"teal",children:Object(z.jsx)(j.f,{href:"/login",children:"Log in"})}),Object(z.jsx)(qe,{})]})})]}),Object(z.jsx)(j.c,{maxW:"container.xl",minHeight:"80vh",children:Object(z.jsx)(Ce,{})}),Object(z.jsx)(We,{})]})},Ge=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,331)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),s(e),o(e)}))},Xe=r(19),Je=r(170),Ke=r(69),Ye={loading:!1,token:null,error:!1,errResponse:""};var Me={loading:!1,foods:"",error:!1,errResponse:""};var Ve=r(20),Qe={foods:[],count:0,totalAmount:0,discount:null,error:null,message:null,coupon:null,priceBeforeCoupon:null};function Ze(e,t){var r=Object(p.a)({},e),n=t.food,c=t.qty,s=r.foods.find((function(e){return e._id===n._id}));if(s)return s.qty=c,r.priceBeforeCoupon=tt(r.foods),r.totalAmount=tt(r.foods,r.discount),r.count=rt(r.foods),localStorage.setItem("foodoCart",JSON.stringify(r)),r;n.qty=c;var o=Object(p.a)({},e);return o.foods=[].concat(Object(Ve.a)(o.foods),[n]),o.priceBeforeCoupon=tt(o.foods),o.totalAmount=tt(o.foods,e.discount),o.count=rt(o.foods),localStorage.setItem("foodoCart",JSON.stringify(o)),o}function $e(e,t){var r=Object(p.a)({},e);return r.foods=r.foods.filter((function(e){return e._id!==t})),r.priceBeforeCoupon=tt(r.foods),r.totalAmount=tt(r.foods,r.discount),r.count=rt(r.foods),localStorage.setItem("foodoCart",JSON.stringify(r)),r}function et(e,t,r){var n=Object(p.a)({},e);return n.discount=t,n.priceBeforeCoupon=tt(n.foods),n.totalAmount=tt(n.foods,t),n.count=rt(n.foods),n.message="Coupon has been applied! You got ".concat(t,"% off"),n.coupon=r,n}function tt(e,t){var r=0;return r=e.reduce((function(e,t){return e+t.price*t.qty}),0),t&&(r-=t/100*r),+r.toFixed(2)}function rt(e){return e.reduce((function(e,t){return e+t.qty}),0)}var nt={loading:!0,error:!1,errResponse:"",user:null};var ct={loading:!1,orderResponse:null,error:!1,errResponse:"",orders:null,singleOrder:null};var st=Object(Ke.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(p.a)(Object(p.a)({},e),{},{loading:!0,error:!1,errResponse:""});case C:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,token:t.payload});case A:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!0,errResponse:t.payload});case T:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:""});case k:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:"",token:null});default:return e}},foods:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(p.a)(Object(p.a)({},e),{},{loading:!0,error:!1,errResponse:""});case ue:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,foods:t.payload});case be:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!0,errResponse:t.payload});case Oe:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:""});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(p.a)(Object(p.a)({},e),Ze(e,t.payload));case te:return Object(p.a)(Object(p.a)({},e),$e(e,t.payload));case re:return Object(p.a)({},t.payload);case ne:var r=t.payload,n=r.coupon,c=r.percent_off;return Object(p.a)(Object(p.a)({},e),et(e,c,n));case se:return localStorage.removeItem("foodoCart"),Qe;case ce:return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});case oe:return Object(p.a)(Object(p.a)({},e),{},{error:null,message:null});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(p.a)(Object(p.a)({},e),{},{loading:!0,error:!1,errResponse:""});case W:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:"",user:t.payload});case q:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!0,errResponse:t.payload});case"AUTH_LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:"",user:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(p.a)(Object(p.a)({},e),{},{loading:!0,error:!1,errResponse:""});case xe:return Object(p.a)(Object(p.a)({},e),{},{loading:!0,error:!1,errResponse:"",orderResponse:t.payload});case ve:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:"",orders:t.payload});case ye:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!1,errResponse:"",singleOrder:t.payload});case me:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,error:!0,orderResponse:null,errResponse:t.payload});case ge:return Object(p.a)(Object(p.a)({},e),{},{orderResponse:null});default:return e}}}),ot=st,at=[Je.a],it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ke.c,lt=Object(Ke.d)(ot,{},it(Ke.a.apply(void 0,at)));o.a.render(Object(z.jsx)(y.a,{store:lt,children:Object(z.jsx)(c.a.StrictMode,{children:Object(z.jsx)(Xe.a,{children:Object(z.jsx)(He,{})})})}),document.getElementById("root")),Ge()}},[[327,1,2]]]);
//# sourceMappingURL=main.2d146063.chunk.js.map